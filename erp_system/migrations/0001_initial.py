# Generated by Django 5.2.8 on 2025-12-19 14:10

import django.contrib.auth.models
import django.contrib.auth.validators
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import erp_system.models
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
        ('contenttypes', '0002_remove_content_type_name'),
    ]

    operations = [
        migrations.CreateModel(
            name='User',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('username', models.CharField(error_messages={'unique': 'A user with that username already exists.'}, help_text='Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.', max_length=150, unique=True, validators=[django.contrib.auth.validators.UnicodeUsernameValidator()], verbose_name='username')),
                ('first_name', models.CharField(blank=True, max_length=150, verbose_name='first name')),
                ('last_name', models.CharField(blank=True, max_length=150, verbose_name='last name')),
                ('email', models.EmailField(blank=True, max_length=254, verbose_name='email address')),
                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),
                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('employee_id', models.CharField(max_length=20, unique=True, verbose_name='Employee ID')),
                ('role', models.CharField(choices=[('super_admin', 'Super Administrator'), ('admin', 'Administrator'), ('supervisor', 'Supervisor'), ('data_entry', 'Data Entry Officer'), ('field_officer', 'Field Officer'), ('analyst', 'Data Analyst'), ('accountant', 'Accountant'), ('auditor', 'Auditor'), ('manager', 'Manager'), ('viewer', 'Viewer')], default='viewer', max_length=20, verbose_name='User Role')),
                ('phone_number', models.CharField(blank=True, max_length=15, verbose_name='Phone Number')),
                ('alternative_phone', models.CharField(blank=True, max_length=15, verbose_name='Alternative Phone')),
                ('national_id', models.CharField(blank=True, max_length=20, null=True, unique=True, verbose_name='National ID')),
                ('date_of_birth', models.DateField(blank=True, null=True, verbose_name='Date of Birth')),
                ('gender', models.CharField(blank=True, choices=[('M', 'Male'), ('F', 'Female'), ('O', 'Other')], max_length=1, verbose_name='Gender')),
                ('address', models.TextField(blank=True, verbose_name='Address')),
                ('profile_photo', models.ImageField(blank=True, null=True, upload_to=erp_system.models.user_profile_upload_path, verbose_name='Profile Photo')),
                ('date_joined_company', models.DateField(blank=True, null=True, verbose_name='Date Joined')),
                ('job_title', models.CharField(blank=True, max_length=100, verbose_name='Job Title')),
                ('salary', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Salary')),
                ('can_approve_prices', models.BooleanField(default=False, verbose_name='Can Approve Prices')),
                ('can_generate_reports', models.BooleanField(default=False, verbose_name='Can Generate Reports')),
                ('can_export_data', models.BooleanField(default=False, verbose_name='Can Export Data')),
                ('can_manage_users', models.BooleanField(default=False, verbose_name='Can Manage Users')),
                ('can_manage_finances', models.BooleanField(default=False, verbose_name='Can Manage Finances')),
                ('last_login_ip', models.GenericIPAddressField(blank=True, null=True, verbose_name='Last Login IP')),
                ('failed_login_attempts', models.IntegerField(default=0, verbose_name='Failed Login Attempts')),
                ('account_locked_until', models.DateTimeField(blank=True, null=True, verbose_name='Account Locked Until')),
                ('language_preference', models.CharField(default='en', max_length=10, verbose_name='Language')),
                ('timezone', models.CharField(default='Africa/Nairobi', max_length=50, verbose_name='Timezone')),
                ('email_notifications', models.BooleanField(default=True, verbose_name='Email Notifications')),
                ('sms_notifications', models.BooleanField(default=False, verbose_name='SMS Notifications')),
                ('digital_signature', models.ImageField(blank=True, null=True, upload_to='signatures/', verbose_name='Digital Signature')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
            ],
            options={
                'verbose_name': 'User',
                'verbose_name_plural': 'Users',
                'db_table': 'users',
                'ordering': ['employee_id'],
            },
            managers=[
                ('objects', django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name='APIKey',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Key Name')),
                ('key', models.CharField(max_length=64, unique=True, verbose_name='API Key')),
                ('permissions', models.JSONField(default=list, verbose_name='Permissions')),
                ('is_active', models.BooleanField(default=True)),
                ('rate_limit', models.IntegerField(default=1000, verbose_name='Rate Limit (requests/hour)')),
                ('last_used_at', models.DateTimeField(blank=True, null=True)),
                ('usage_count', models.IntegerField(default=0)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='api_keys', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'API Key',
                'verbose_name_plural': 'API Keys',
                'db_table': 'api_keys',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Basket',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='Basket Name')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='Basket Code')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('annual_budget', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Annual Budget')),
                ('target_outlets', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Target Outlets')),
                ('coordinator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='coordinated_baskets', to=settings.AUTH_USER_MODEL, verbose_name='Basket Coordinator')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Basket',
                'verbose_name_plural': 'Baskets',
                'db_table': 'baskets',
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='DataQualityCheck',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Check Name')),
                ('check_type', models.CharField(choices=[('outlier', 'Outlier Detection'), ('consistency', 'Consistency Check'), ('completeness', 'Completeness Check'), ('timeliness', 'Timeliness Check'), ('accuracy', 'Accuracy Check')], max_length=20)),
                ('applies_to_model', models.CharField(max_length=50, verbose_name='Applies To Model')),
                ('rule_definition', models.JSONField(verbose_name='Rule Definition')),
                ('threshold', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Threshold')),
                ('is_active', models.BooleanField(default=True)),
                ('severity', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('critical', 'Critical')], default='medium', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='quality_checks_created', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Data Quality Check',
                'verbose_name_plural': 'Data Quality Checks',
                'db_table': 'data_quality_checks',
                'ordering': ['check_type', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Department',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='Department Name')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='Department Code')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('budget', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Annual Budget')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('manager', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_departments', to=settings.AUTH_USER_MODEL, verbose_name='Department Manager')),
                ('parent_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sub_departments', to='erp_system.department', verbose_name='Parent Department')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Department',
                'verbose_name_plural': 'Departments',
                'db_table': 'departments',
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='Budget',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Budget Name')),
                ('budget_type', models.CharField(choices=[('operational', 'Operational Budget'), ('capital', 'Capital Budget'), ('project', 'Project Budget'), ('departmental', 'Departmental Budget')], max_length=20, verbose_name='Budget Type')),
                ('fiscal_year', models.IntegerField(verbose_name='Fiscal Year')),
                ('allocated_amount', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='Allocated Amount')),
                ('spent_amount', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Spent Amount')),
                ('committed_amount', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Committed Amount')),
                ('start_date', models.DateField(verbose_name='Start Date')),
                ('end_date', models.DateField(verbose_name='End Date')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='budgets_created', to=settings.AUTH_USER_MODEL)),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='budgets', to='erp_system.department', verbose_name='Department')),
            ],
            options={
                'verbose_name': 'Budget',
                'verbose_name_plural': 'Budgets',
                'db_table': 'budgets',
                'ordering': ['-fiscal_year', 'name'],
            },
        ),
        migrations.AddField(
            model_name='user',
            name='department',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='users', to='erp_system.department', verbose_name='Department'),
        ),
        migrations.CreateModel(
            name='Division',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='Division Code')),
                ('name', models.CharField(max_length=100, verbose_name='Division Name')),
                ('name_local', models.CharField(blank=True, max_length=100, verbose_name='Local Name')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('sort_order', models.IntegerField(default=0, verbose_name='Sort Order')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='subdivisions', to='erp_system.division', verbose_name='Parent Division')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Division',
                'verbose_name_plural': 'Divisions',
                'db_table': 'divisions',
                'ordering': ['sort_order', 'code'],
            },
        ),
        migrations.CreateModel(
            name='COICOPCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('new_coicop', models.CharField(max_length=50, verbose_name='New COICOP')),
                ('old_coicop', models.CharField(blank=True, max_length=50, verbose_name='Old COICOP')),
                ('coicop_26', models.CharField(blank=True, max_length=50, verbose_name='COICOP 26')),
                ('icp_code', models.CharField(blank=True, max_length=50, verbose_name='ICP Code')),
                ('eac_code', models.CharField(blank=True, max_length=50, verbose_name='EAC Code')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('description_local', models.TextField(blank=True, verbose_name='Local Description')),
                ('level', models.IntegerField(default=1, verbose_name='Classification Level')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('parent_category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='subcategories', to='erp_system.coicopcategory', verbose_name='Parent Category')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
                ('division', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='coicop_categories', to='erp_system.division', verbose_name='Division')),
            ],
            options={
                'verbose_name': 'COICOP Category',
                'verbose_name_plural': 'COICOP Categories',
                'db_table': 'coicop_categories',
                'ordering': ['new_coicop'],
            },
        ),
        migrations.CreateModel(
            name='DocumentCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True, verbose_name='Category Name')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='Code')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('icon', models.CharField(blank=True, max_length=50, verbose_name='Icon Class')),
                ('color', models.CharField(default='#3498db', max_length=7, verbose_name='Color')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='subcategories', to='erp_system.documentcategory', verbose_name='Parent Category')),
            ],
            options={
                'verbose_name': 'Document Category',
                'verbose_name_plural': 'Document Categories',
                'db_table': 'document_categories',
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='Document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=255, verbose_name='Document Title')),
                ('document_number', models.CharField(max_length=50, unique=True, verbose_name='Document Number')),
                ('document_type', models.CharField(choices=[('invoice', 'Invoice'), ('receipt', 'Receipt'), ('contract', 'Contract'), ('report', 'Report'), ('policy', 'Policy Document'), ('manual', 'Manual'), ('form', 'Form'), ('certificate', 'Certificate'), ('license', 'License'), ('permit', 'Permit'), ('letter', 'Official Letter'), ('memo', 'Memorandum'), ('evidence', 'Price Evidence'), ('tender', 'Tender Document'), ('other', 'Other')], max_length=20, verbose_name='Document Type')),
                ('file', models.FileField(upload_to=erp_system.models.document_upload_path, validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'doc', 'docx', 'xls', 'xlsx', 'jpg', 'jpeg', 'png', 'zip'])], verbose_name='File')),
                ('file_size', models.BigIntegerField(default=0, verbose_name='File Size (bytes)')),
                ('mime_type', models.CharField(blank=True, max_length=100, verbose_name='MIME Type')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('tags', models.CharField(blank=True, max_length=255, verbose_name='Tags')),
                ('version', models.CharField(default='1.0', max_length=20, verbose_name='Version')),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending_review', 'Pending Review'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('archived', 'Archived'), ('expired', 'Expired')], default='draft', max_length=20, verbose_name='Status')),
                ('object_id', models.PositiveIntegerField(blank=True, null=True)),
                ('document_date', models.DateField(verbose_name='Document Date')),
                ('expiry_date', models.DateField(blank=True, null=True, verbose_name='Expiry Date')),
                ('is_confidential', models.BooleanField(default=False, verbose_name='Confidential')),
                ('is_public', models.BooleanField(default=False, verbose_name='Public')),
                ('allowed_roles', models.JSONField(blank=True, default=list, verbose_name='Allowed Roles')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True, verbose_name='Uploaded At')),
                ('reviewed_at', models.DateTimeField(blank=True, null=True, verbose_name='Reviewed At')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='Approved At')),
                ('download_count', models.IntegerField(default=0, verbose_name='Download Count')),
                ('last_downloaded_at', models.DateTimeField(blank=True, null=True, verbose_name='Last Downloaded')),
                ('search_vector', models.TextField(blank=True, verbose_name='Search Vector')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='documents_approved', to=settings.AUTH_USER_MODEL, verbose_name='Approved By')),
                ('content_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='documents_reviewed', to=settings.AUTH_USER_MODEL, verbose_name='Reviewed By')),
                ('uploaded_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='documents_uploaded', to=settings.AUTH_USER_MODEL, verbose_name='Uploaded By')),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='documents', to='erp_system.documentcategory', verbose_name='Category')),
            ],
            options={
                'verbose_name': 'Document',
                'verbose_name_plural': 'Documents',
                'db_table': 'documents',
                'ordering': ['-uploaded_at'],
            },
        ),
        migrations.CreateModel(
            name='DocumentVersion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('version_number', models.CharField(max_length=20, verbose_name='Version Number')),
                ('file', models.FileField(upload_to='documents/versions/', verbose_name='File')),
                ('changes_description', models.TextField(blank=True, verbose_name='Changes Description')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('file_size', models.BigIntegerField(default=0, verbose_name='File Size')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='document_versions_created', to=settings.AUTH_USER_MODEL)),
                ('document', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='versions', to='erp_system.document', verbose_name='Document')),
            ],
            options={
                'verbose_name': 'Document Version',
                'verbose_name_plural': 'Document Versions',
                'db_table': 'document_versions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ExternalIntegration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Integration Name')),
                ('integration_type', models.CharField(choices=[('mpesa', 'M-Pesa Payment'), ('email', 'Email Service'), ('sms', 'SMS Gateway'), ('cloud_storage', 'Cloud Storage'), ('erp', 'External ERP'), ('api', 'Custom API')], max_length=50)),
                ('configuration', models.JSONField(verbose_name='Configuration')),
                ('is_active', models.BooleanField(default=True)),
                ('last_sync_at', models.DateTimeField(blank=True, null=True)),
                ('sync_status', models.CharField(blank=True, max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='integrations_created', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'External Integration',
                'verbose_name_plural': 'External Integrations',
                'db_table': 'external_integrations',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(choices=[('info', 'Information'), ('success', 'Success'), ('warning', 'Warning'), ('error', 'Error'), ('approval_required', 'Approval Required'), ('deadline', 'Deadline Alert')], default='info', max_length=20)),
                ('title', models.CharField(max_length=200, verbose_name='Title')),
                ('message', models.TextField(verbose_name='Message')),
                ('object_id', models.PositiveIntegerField(blank=True, null=True)),
                ('action_url', models.CharField(blank=True, max_length=255, verbose_name='Action URL')),
                ('is_read', models.BooleanField(default=False, verbose_name='Read')),
                ('read_at', models.DateTimeField(blank=True, null=True, verbose_name='Read At')),
                ('sent_via_email', models.BooleanField(default=False)),
                ('sent_via_sms', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('content_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'notifications',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Outlet',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('outlet_number', models.CharField(max_length=50, unique=True, verbose_name='Outlet Number')),
                ('outlet_code', models.CharField(max_length=50, unique=True, verbose_name='Outlet Code')),
                ('name', models.CharField(max_length=200, verbose_name='Outlet Name')),
                ('address', models.TextField(blank=True, verbose_name='Physical Address')),
                ('postal_address', models.CharField(blank=True, max_length=100, verbose_name='Postal Address')),
                ('contact_person', models.CharField(blank=True, max_length=100, verbose_name='Contact Person')),
                ('contact_phone', models.CharField(blank=True, max_length=15, verbose_name='Contact Phone')),
                ('contact_email', models.EmailField(blank=True, max_length=254, verbose_name='Contact Email')),
                ('business_registration_number', models.CharField(blank=True, max_length=50, verbose_name='Business Registration Number')),
                ('tax_identification_number', models.CharField(blank=True, max_length=50, verbose_name='Tax Identification Number')),
                ('max_items', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Maximum Items')),
                ('opening_hours', models.CharField(blank=True, max_length=100, verbose_name='Opening Hours')),
                ('operating_days', models.CharField(blank=True, max_length=50, verbose_name='Operating Days')),
                ('average_monthly_revenue', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Average Monthly Revenue')),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True, verbose_name='Latitude')),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True, verbose_name='Longitude')),
                ('verification_status', models.CharField(choices=[('pending', 'Pending Verification'), ('verified', 'Verified'), ('rejected', 'Rejected')], default='pending', max_length=20, verbose_name='Verification Status')),
                ('last_visited_date', models.DateField(blank=True, null=True, verbose_name='Last Visited')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('assigned_officer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_outlets', to=settings.AUTH_USER_MODEL, verbose_name='Assigned Officer')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Outlet',
                'verbose_name_plural': 'Outlets',
                'db_table': 'outlets',
                'ordering': ['outlet_number'],
            },
        ),
        migrations.CreateModel(
            name='Invoice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('invoice_number', models.CharField(max_length=50, unique=True, verbose_name='Invoice Number')),
                ('invoice_type', models.CharField(choices=[('payment', 'Payment to Outlet'), ('expense', 'Operating Expense'), ('salary', 'Salary Payment'), ('vendor', 'Vendor Payment'), ('allowance', 'Allowance Payment')], max_length=20, verbose_name='Invoice Type')),
                ('vendor_name', models.CharField(blank=True, max_length=200, verbose_name='Vendor Name')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Amount')),
                ('currency', models.CharField(default='KES', max_length=3, verbose_name='Currency')),
                ('tax_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Tax Amount')),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Total Amount')),
                ('invoice_date', models.DateField(verbose_name='Invoice Date')),
                ('due_date', models.DateField(verbose_name='Due Date')),
                ('payment_date', models.DateField(blank=True, null=True, verbose_name='Payment Date')),
                ('description', models.TextField(verbose_name='Description')),
                ('items_description', models.JSONField(blank=True, default=list, verbose_name='Line Items')),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending', 'Pending Approval'), ('approved', 'Approved'), ('paid', 'Paid'), ('rejected', 'Rejected'), ('cancelled', 'Cancelled')], default='draft', max_length=20, verbose_name='Status')),
                ('payment_method', models.CharField(blank=True, choices=[('bank_transfer', 'Bank Transfer'), ('mpesa', 'M-Pesa'), ('cash', 'Cash'), ('cheque', 'Cheque')], max_length=20, verbose_name='Payment Method')),
                ('payment_reference', models.CharField(blank=True, max_length=100, verbose_name='Payment Reference')),
                ('invoice_file', models.FileField(blank=True, null=True, upload_to=erp_system.models.invoice_upload_path, validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'jpg', 'jpeg', 'png'])], verbose_name='Invoice File')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='Approved At')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='invoices_approved', to=settings.AUTH_USER_MODEL, verbose_name='Approved By')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='invoices_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('paid_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='invoices_paid', to=settings.AUTH_USER_MODEL, verbose_name='Paid By')),
                ('outlet', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='invoices', to='erp_system.outlet', verbose_name='Outlet')),
            ],
            options={
                'verbose_name': 'Invoice',
                'verbose_name_plural': 'Invoices',
                'db_table': 'invoices',
                'ordering': ['-invoice_date'],
            },
        ),
        migrations.CreateModel(
            name='OutletProduct',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('item_number', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)], verbose_name='Item Number')),
                ('is_available', models.BooleanField(default=True, verbose_name='Is Available')),
                ('availability_status', models.CharField(choices=[('regular', 'Regular Stock'), ('seasonal', 'Seasonal'), ('discontinued', 'Discontinued'), ('out_of_stock', 'Out of Stock')], default='regular', max_length=20, verbose_name='Availability Status')),
                ('last_seen_date', models.DateField(blank=True, null=True, verbose_name='Last Seen Date')),
                ('last_price_date', models.DateField(blank=True, null=True, verbose_name='Last Price Date')),
                ('local_brand', models.CharField(blank=True, max_length=100, verbose_name='Local Brand Name')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('outlet', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='outlet_products', to='erp_system.outlet', verbose_name='Outlet')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Outlet Product',
                'verbose_name_plural': 'Outlet Products',
                'db_table': 'outlet_products',
                'ordering': ['outlet', 'item_number'],
            },
        ),
        migrations.CreateModel(
            name='OutletType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='Type Code')),
                ('name', models.CharField(max_length=200, verbose_name='Type Name')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('category', models.CharField(blank=True, max_length=50, verbose_name='Category')),
                ('is_formal', models.BooleanField(default=True, verbose_name='Is Formal Establishment')),
                ('requires_license', models.BooleanField(default=False, verbose_name='Requires License')),
                ('min_items', models.IntegerField(default=1, verbose_name='Minimum Items')),
                ('max_items', models.IntegerField(default=100, verbose_name='Maximum Items')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Outlet Type',
                'verbose_name_plural': 'Outlet Types',
                'db_table': 'outlet_types',
                'ordering': ['code'],
            },
        ),
        migrations.AddField(
            model_name='outlet',
            name='outlet_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='outlets', to='erp_system.outlettype', verbose_name='Outlet Type'),
        ),
        migrations.CreateModel(
            name='PriceEntry',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('price', models.DecimalField(decimal_places=2, max_digits=15, validators=[django.core.validators.MinValueValidator(0)])),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('submitted', 'Submitted'), ('verified', 'Verified'), ('approved', 'Approved'), ('rejected', 'Rejected')], default='draft', max_length=20)),
                ('collected_date', models.DateField()),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('collected_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='prices_collected', to=settings.AUTH_USER_MODEL)),
                ('outlet_product', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prices', to='erp_system.outletproduct')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='prices_verified', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'price_entries',
                'ordering': ['-period', 'outlet_product'],
            },
        ),
        migrations.CreateModel(
            name='PriceEvidence',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('photo', models.ImageField(upload_to=erp_system.models.evidence_upload_path, validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['jpg', 'jpeg', 'png'])], verbose_name='Evidence Photo')),
                ('caption', models.CharField(blank=True, max_length=255, verbose_name='Caption')),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('taken_at', models.DateTimeField(verbose_name='Photo Taken At')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('file_size', models.BigIntegerField(default=0)),
                ('is_verified', models.BooleanField(default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('price_entry', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evidence_photos', to='erp_system.priceentry')),
                ('uploaded_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='evidence_photos_uploaded', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='evidence_verified', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Price Evidence',
                'verbose_name_plural': 'Price Evidence',
                'db_table': 'price_evidence',
                'ordering': ['-uploaded_at'],
            },
        ),
        migrations.CreateModel(
            name='PricePeriod',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('year', models.IntegerField(verbose_name='Year')),
                ('month', models.IntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)], verbose_name='Month')),
                ('period_name', models.CharField(max_length=50, verbose_name='Period Name')),
                ('start_date', models.DateField(verbose_name='Start Date')),
                ('end_date', models.DateField(verbose_name='End Date')),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('open', 'Open for Collection'), ('review', 'Under Review'), ('closed', 'Closed'), ('archived', 'Archived')], default='draft', max_length=20, verbose_name='Status')),
                ('closed_at', models.DateTimeField(blank=True, null=True, verbose_name='Closed At')),
                ('target_outlets', models.IntegerField(default=0, verbose_name='Target Outlets')),
                ('target_prices', models.IntegerField(default=0, verbose_name='Target Prices')),
                ('collected_prices', models.IntegerField(default=0, verbose_name='Collected Prices')),
                ('approved_prices', models.IntegerField(default=0, verbose_name='Approved Prices')),
                ('allocated_budget', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Allocated Budget')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('closed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='periods_closed', to=settings.AUTH_USER_MODEL, verbose_name='Closed By')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Price Period',
                'verbose_name_plural': 'Price Periods',
                'db_table': 'price_periods',
                'ordering': ['-year', '-month'],
            },
        ),
        migrations.AddField(
            model_name='priceentry',
            name='period',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='price_entries', to='erp_system.priceperiod'),
        ),
        migrations.CreateModel(
            name='GeneratedReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report_type', models.CharField(choices=[('price_summary', 'Price Summary Report'), ('outlet_performance', 'Outlet Performance Report'), ('data_quality', 'Data Quality Report'), ('financial', 'Financial Report'), ('collection_status', 'Collection Status Report'), ('custom', 'Custom Report')], max_length=50, verbose_name='Report Type')),
                ('title', models.CharField(max_length=255, verbose_name='Report Title')),
                ('filters', models.JSONField(blank=True, default=dict, verbose_name='Applied Filters')),
                ('report_file', models.FileField(upload_to=erp_system.models.report_upload_path, validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'xlsx', 'csv'])], verbose_name='Report File')),
                ('file_format', models.CharField(choices=[('pdf', 'PDF'), ('xlsx', 'Excel'), ('csv', 'CSV')], default='pdf', max_length=10, verbose_name='File Format')),
                ('file_size', models.BigIntegerField(default=0, verbose_name='File Size')),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('download_count', models.IntegerField(default=0)),
                ('is_public', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('generated_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='reports_generated', to=settings.AUTH_USER_MODEL)),
                ('period', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reports', to='erp_system.priceperiod', verbose_name='Period')),
            ],
            options={
                'verbose_name': 'Generated Report',
                'verbose_name_plural': 'Generated Reports',
                'db_table': 'generated_reports',
                'ordering': ['-generated_at'],
            },
        ),
        migrations.CreateModel(
            name='Product',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('item_code', models.CharField(max_length=50, unique=True, verbose_name='Item Code')),
                ('barcode', models.CharField(blank=True, max_length=100, null=True, unique=True, verbose_name='Barcode')),
                ('sku', models.CharField(blank=True, max_length=50, verbose_name='SKU')),
                ('product_name', models.CharField(max_length=200, verbose_name='Product Name')),
                ('product_name_local', models.CharField(blank=True, max_length=200, verbose_name='Local Name')),
                ('specification', models.TextField(blank=True, verbose_name='Specification')),
                ('brand', models.CharField(blank=True, max_length=100, verbose_name='Brand')),
                ('manufacturer', models.CharField(blank=True, max_length=200, verbose_name='Manufacturer')),
                ('unit_of_measurement', models.CharField(max_length=50, verbose_name='Unit of Measurement')),
                ('quantity', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Quantity')),
                ('pack_size', models.CharField(blank=True, max_length=50, verbose_name='Pack Size')),
                ('is_non_standard', models.BooleanField(default=False, verbose_name='Non-Standard Item')),
                ('is_seasonal', models.BooleanField(default=False, verbose_name='Seasonal Item')),
                ('is_imported', models.BooleanField(default=False, verbose_name='Imported Item')),
                ('country_of_origin', models.CharField(blank=True, max_length=100, verbose_name='Country of Origin')),
                ('reference_price', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Reference Price')),
                ('min_expected_price', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Min Expected Price')),
                ('max_expected_price', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Max Expected Price')),
                ('product_image', models.ImageField(blank=True, null=True, upload_to='products/images/', verbose_name='Product Image')),
                ('requires_quality_check', models.BooleanField(default=False, verbose_name='Requires Quality Check')),
                ('quality_standards', models.TextField(blank=True, verbose_name='Quality Standards')),
                ('tags', models.CharField(blank=True, max_length=200, verbose_name='Tags')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('coicop_category', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='products', to='erp_system.coicopcategory', verbose_name='COICOP Category')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Product',
                'verbose_name_plural': 'Products',
                'db_table': 'products',
                'ordering': ['item_code'],
            },
        ),
        migrations.AddField(
            model_name='outletproduct',
            name='product',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='outlet_products', to='erp_system.product', verbose_name='Product'),
        ),
        migrations.CreateModel(
            name='SavedReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Report Name')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('report_type', models.CharField(max_length=50, verbose_name='Report Type')),
                ('filters', models.JSONField(verbose_name='Filter Parameters')),
                ('is_public', models.BooleanField(default=False, verbose_name='Share with Others')),
                ('is_scheduled', models.BooleanField(default=False, verbose_name='Schedule Generation')),
                ('schedule_frequency', models.CharField(blank=True, choices=[('daily', 'Daily'), ('weekly', 'Weekly'), ('monthly', 'Monthly'), ('quarterly', 'Quarterly')], max_length=20, verbose_name='Schedule Frequency')),
                ('last_run_at', models.DateTimeField(blank=True, null=True)),
                ('next_run_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='saved_reports', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Saved Report',
                'verbose_name_plural': 'Saved Reports',
                'db_table': 'saved_reports',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SystemConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('key', models.CharField(max_length=100, unique=True, verbose_name='Configuration Key')),
                ('value', models.TextField(verbose_name='Configuration Value')),
                ('category', models.CharField(choices=[('general', 'General'), ('security', 'Security'), ('email', 'Email'), ('sms', 'SMS'), ('storage', 'Storage'), ('api', 'API')], default='general', max_length=50, verbose_name='Category')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('is_encrypted', models.BooleanField(default=False, verbose_name='Encrypted')),
                ('is_public', models.BooleanField(default=False, verbose_name='Public')),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('updated_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='configurations_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'System Configuration',
                'verbose_name_plural': 'System Configurations',
                'db_table': 'system_configuration',
                'ordering': ['category', 'key'],
            },
        ),
        migrations.CreateModel(
            name='TrainingModule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='Module Title')),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='Module Code')),
                ('category', models.CharField(choices=[('system_basics', 'System Basics'), ('data_collection', 'Data Collection'), ('analysis', 'Data Analysis'), ('reporting', 'Reporting'), ('administration', 'System Administration')], max_length=50, verbose_name='Category')),
                ('description', models.TextField(verbose_name='Description')),
                ('content', models.TextField(blank=True, verbose_name='Content')),
                ('duration_minutes', models.IntegerField(default=60, verbose_name='Duration (minutes)')),
                ('training_file', models.FileField(blank=True, null=True, upload_to=erp_system.models.training_material_upload_path, validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'ppt', 'pptx', 'mp4'])], verbose_name='Training Material')),
                ('is_mandatory', models.BooleanField(default=False, verbose_name='Mandatory')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='training_modules_created', to=settings.AUTH_USER_MODEL)),
                ('prerequisites', models.ManyToManyField(blank=True, to='erp_system.trainingmodule', verbose_name='Prerequisites')),
            ],
            options={
                'verbose_name': 'Training Module',
                'verbose_name_plural': 'Training Modules',
                'db_table': 'training_modules',
                'ordering': ['code'],
            },
        ),
        migrations.CreateModel(
            name='UserTraining',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('not_started', 'Not Started'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('failed', 'Failed')], default='not_started', max_length=20)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('score', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Score (%)')),
                ('certificate_file', models.FileField(blank=True, null=True, upload_to='training/certificates/', verbose_name='Certificate')),
                ('notes', models.TextField(blank=True)),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='user_completions', to='erp_system.trainingmodule')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='training_records', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'User Training',
                'verbose_name_plural': 'User Training Records',
                'db_table': 'user_training',
                'ordering': ['-completed_at'],
            },
        ),
        migrations.CreateModel(
            name='WorkflowInstance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('object_id', models.PositiveIntegerField()),
                ('current_step', models.IntegerField(default=0, verbose_name='Current Step')),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('in_progress', 'In Progress'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('cancelled', 'Cancelled')], default='pending', max_length=20, verbose_name='Status')),
                ('initiated_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('content_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('initiated_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='workflows_initiated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Workflow Instance',
                'verbose_name_plural': 'Workflow Instances',
                'db_table': 'workflow_instances',
                'ordering': ['-initiated_at'],
            },
        ),
        migrations.CreateModel(
            name='ApprovalAction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('step_number', models.IntegerField(verbose_name='Step Number')),
                ('action', models.CharField(choices=[('approved', 'Approved'), ('rejected', 'Rejected'), ('returned', 'Returned for Revision'), ('forwarded', 'Forwarded')], max_length=20, verbose_name='Action')),
                ('comments', models.TextField(blank=True, verbose_name='Comments')),
                ('actioned_at', models.DateTimeField(auto_now_add=True)),
                ('signature_image', models.ImageField(blank=True, null=True, upload_to='signatures/approvals/', verbose_name='Digital Signature')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('actioned_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='approval_actions', to=settings.AUTH_USER_MODEL)),
                ('workflow_instance', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='actions', to='erp_system.workflowinstance')),
            ],
            options={
                'verbose_name': 'Approval Action',
                'verbose_name_plural': 'Approval Actions',
                'db_table': 'approval_actions',
                'ordering': ['-actioned_at'],
            },
        ),
        migrations.CreateModel(
            name='WorkflowTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Workflow Name')),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='Code')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('applies_to', models.CharField(choices=[('price_entry', 'Price Entry'), ('document', 'Document'), ('invoice', 'Invoice'), ('outlet', 'Outlet'), ('report', 'Report')], max_length=50, verbose_name='Applies To')),
                ('steps', models.JSONField(default=list, verbose_name='Workflow Steps')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='workflow_templates_created', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Workflow Template',
                'verbose_name_plural': 'Workflow Templates',
                'db_table': 'workflow_templates',
                'ordering': ['code'],
            },
        ),
        migrations.AddField(
            model_name='workflowinstance',
            name='workflow_template',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='instances', to='erp_system.workflowtemplate'),
        ),
        migrations.CreateModel(
            name='Zone',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='Deleted')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Deleted At')),
                ('name', models.CharField(max_length=100, verbose_name='Zone Name')),
                ('zone_code', models.CharField(max_length=20, unique=True, verbose_name='Zone Code')),
                ('region', models.CharField(blank=True, max_length=100, verbose_name='Region')),
                ('county', models.CharField(blank=True, max_length=100, verbose_name='County')),
                ('constituency', models.CharField(blank=True, max_length=100, verbose_name='Constituency')),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True, verbose_name='Latitude')),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True, verbose_name='Longitude')),
                ('basket', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='zones', to='erp_system.basket', verbose_name='Basket')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL, verbose_name='Deleted By')),
                ('supervisor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='supervised_zones', to=settings.AUTH_USER_MODEL, verbose_name='Zone Supervisor')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL, verbose_name='Updated By')),
            ],
            options={
                'verbose_name': 'Zone',
                'verbose_name_plural': 'Zones',
                'db_table': 'zones',
                'ordering': ['zone_code'],
            },
        ),
        migrations.AddField(
            model_name='outlet',
            name='zone',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='outlets', to='erp_system.zone', verbose_name='Zone'),
        ),
        migrations.AddField(
            model_name='user',
            name='assigned_zones',
            field=models.ManyToManyField(blank=True, related_name='assigned_users', to='erp_system.zone', verbose_name='Assigned Zones'),
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('create', 'Create'), ('update', 'Update'), ('delete', 'Delete'), ('approve', 'Approve'), ('reject', 'Reject'), ('export', 'Export'), ('import', 'Import'), ('login', 'Login'), ('logout', 'Logout'), ('download', 'Download'), ('upload', 'Upload')], max_length=20)),
                ('model_name', models.CharField(max_length=50)),
                ('object_id', models.IntegerField(blank=True, null=True)),
                ('description', models.TextField()),
                ('old_value', models.JSONField(blank=True, null=True)),
                ('new_value', models.JSONField(blank=True, null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.CharField(blank=True, max_length=255)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'audit_logs',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['user', 'timestamp'], name='audit_logs_user_id_88267f_idx'), models.Index(fields=['model_name', 'object_id'], name='audit_logs_model_n_656046_idx'), models.Index(fields=['action'], name='audit_logs_action_31f574_idx')],
            },
        ),
        migrations.CreateModel(
            name='DataQualityIssue',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('object_id', models.PositiveIntegerField()),
                ('issue_description', models.TextField(verbose_name='Issue Description')),
                ('severity', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('critical', 'Critical')], max_length=20)),
                ('status', models.CharField(choices=[('open', 'Open'), ('investigating', 'Investigating'), ('resolved', 'Resolved'), ('false_positive', 'False Positive'), ('ignored', 'Ignored')], default='open', max_length=20)),
                ('detected_at', models.DateTimeField(auto_now_add=True)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('resolution_notes', models.TextField(blank=True)),
                ('content_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('quality_check', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='issues', to='erp_system.dataqualitycheck')),
                ('resolved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='quality_issues_resolved', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Data Quality Issue',
                'verbose_name_plural': 'Data Quality Issues',
                'db_table': 'data_quality_issues',
                'ordering': ['-detected_at'],
                'indexes': [models.Index(fields=['status', 'severity'], name='data_qualit_status_f77772_idx'), models.Index(fields=['detected_at'], name='data_qualit_detecte_26621f_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='document',
            index=models.Index(fields=['document_type', 'status'], name='documents_documen_67ef0b_idx'),
        ),
        migrations.AddIndex(
            model_name='document',
            index=models.Index(fields=['uploaded_by', 'uploaded_at'], name='documents_uploade_409108_idx'),
        ),
        migrations.AddIndex(
            model_name='document',
            index=models.Index(fields=['document_date'], name='documents_documen_718437_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='documentversion',
            unique_together={('document', 'version_number')},
        ),
        migrations.AddIndex(
            model_name='notification',
            index=models.Index(fields=['recipient', 'is_read'], name='notificatio_recipie_583549_idx'),
        ),
        migrations.AddIndex(
            model_name='notification',
            index=models.Index(fields=['created_at'], name='notificatio_created_e4c995_idx'),
        ),
        migrations.AddIndex(
            model_name='invoice',
            index=models.Index(fields=['status', 'invoice_date'], name='invoices_status_e100f9_idx'),
        ),
        migrations.AddIndex(
            model_name='invoice',
            index=models.Index(fields=['outlet'], name='invoices_outlet__e35f1c_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='priceperiod',
            unique_together={('year', 'month')},
        ),
        migrations.AddIndex(
            model_name='priceentry',
            index=models.Index(fields=['period', 'status'], name='price_entri_period__5cc5dc_idx'),
        ),
        migrations.AddIndex(
            model_name='priceentry',
            index=models.Index(fields=['collected_by', 'status'], name='price_entri_collect_f63258_idx'),
        ),
        migrations.AddIndex(
            model_name='priceentry',
            index=models.Index(fields=['collected_date'], name='price_entri_collect_3491cc_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='priceentry',
            unique_together={('outlet_product', 'period')},
        ),
        migrations.AlterUniqueTogether(
            name='outletproduct',
            unique_together={('outlet', 'product', 'item_number')},
        ),
        migrations.AlterUniqueTogether(
            name='usertraining',
            unique_together={('user', 'module')},
        ),
        migrations.AlterUniqueTogether(
            name='zone',
            unique_together={('basket', 'zone_code')},
        ),
        migrations.AddIndex(
            model_name='outlet',
            index=models.Index(fields=['zone', 'outlet_type'], name='outlets_zone_id_76cc88_idx'),
        ),
        migrations.AddIndex(
            model_name='outlet',
            index=models.Index(fields=['is_active', 'verification_status'], name='outlets_is_acti_f380dd_idx'),
        ),
    ]
